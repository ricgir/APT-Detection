<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Atomic Red Team - APT Detection using ELK Stack</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Atomic Red Team";
        var mkdocs_page_input_path = "setup/art_setup.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> APT Detection using ELK Stack
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../overall_workflow/">Overall Workflow</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../apt_lifecycle/">APT lifecycle</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Setup</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../elk_setup/">ELK</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../vm_setup/">Virtual Machine</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Atomic Red Team</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installation-and-setup">Installation and Setup</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#open-powershell-as-an-administrator">Open PowerShell as an Administrator</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#set-the-powershell-execution-policy">Set the PowerShell Execution Policy</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#install-the-atomic-red-team-powershell-module">Install the Atomic Red Team PowerShell Module</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#import-the-module-and-download-atomics">Import the Module and Download Atomics</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#executing-atomic-tests">Executing Atomic Tests</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-list-available-tests-for-a-technique">1. List Available Tests for a Technique</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-check-for-test-prerequisites">2. Check for Test Prerequisites</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-run-a-specific-atomic-test">3. Run a Specific Atomic Test</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-clean-up-after-a-test">4. Clean Up After a Test</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Rules created</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/active_scanning/">Active Scanning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/phishing/">Phishing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/command_and_scripting_interpreter/">Command and Scripting Interpreter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/boot_or_logon_autostart_execution/">Boot or Logon Autostart Execution</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/abuse_elevation_control_mechanism/">Abuse Elevation Control Mechanism</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/obfuscated_files_or_information/">Obfuscated Files or Information</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/os_credential_dumping/">OS Credential Dumping</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/system_information_discovery/">System Information Discovery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/remote_services/">Remote Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/automated_collection/">Automated Collection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/application_layer_protocol/">Application Layer Protocol</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rules_created/exfiltration_over_alternative_protocol/">Exfiltration Over Alternative Protocol</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">APT Detection using ELK Stack</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Setup</li>
      <li class="breadcrumb-item active">Atomic Red Team</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="atomic-red-team-setup-and-execution-guide-for-windows">Atomic Red Team Setup and Execution Guide for Windows</h1>
<h2 id="introduction">Introduction</h2>
<p><strong>Atomic Red Team</strong> is an open-source library of tests mapped to the MITRE ATT&amp;CK framework, used to safely simulate adversary behavior. This guide covers its installation and execution on a Windows VM.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before you begin, ensure your Windows VM meets the following requirements:</p>
<ul>
<li><strong>Administrator Access</strong>: You must be able to run commands with administrative  - privileges.</li>
<li><strong>PowerShell</strong>: Windows PowerShell 5.1 or later is required. This is installed by default on modern Windows versions (Windows 10/11, Server 2016+).</li>
<li><strong>Internet Connection</strong>: Required for the initial download and installation of the framework and atomic tests.</li>
</ul>
<h2 id="installation-and-setup">Installation and Setup</h2>
<p>The installation process involves setting up the PowerShell execution policy, installing the framework module, and downloading the library of atomic tests.</p>
<h3 id="open-powershell-as-an-administrator">Open PowerShell as an Administrator</h3>
<ol>
<li>Click the Start Menu.</li>
<li>Type PowerShell.</li>
<li>Right-click on Windows PowerShell and select Run as administrator.</li>
</ol>
<h3 id="set-the-powershell-execution-policy">Set the PowerShell Execution Policy</h3>
<p>This command lowers the security policy for the current session to allow locally-run scripts, which is necessary to install and run the Atomic Red Team framework.</p>
<p>In the administrative PowerShell window, run the following command:</p>
<p><code>Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope CurrentUser-Force</code></p>
<h3 id="install-the-atomic-red-team-powershell-module">Install the Atomic Red Team PowerShell Module</h3>
<p>This command downloads and installs the core execution engine from the official PowerShell Gallery.</p>
<p>Run the following command. When prompted to install from an untrusted repository, type <code>Y</code>and press Enter.</p>
<p><code>Install-Module -Name AtomicRedTeam -Scope CurrentUser-Force</code></p>
<h3 id="import-the-module-and-download-atomics">Import the Module and Download Atomics</h3>
<p>After installing the engine, this step loads its commands into your PowerShell session and downloads the actual test files ("atomics") from the official GitHub repository.</p>
<p>Run these two commands in sequence:</p>
<p><strong>1. Import the module</strong>:</p>
<p><code>Import-Module AtomicRedTeam</code></p>
<p><strong>2. Download the atomic tests</strong>:</p>
<p><code>Install-AtomicRedTeam -getAtomics</code></p>
<p>This will download the tests to your local machine, typically into the <code>C:\AtomicRedTeam</code> directory.
You have now successfully installed Atomic Red Team!</p>
<h2 id="executing-atomic-tests">Executing Atomic Tests</h2>
<p>With the framework installed, you can now simulate adversary techniques. The primary command you will use is Invoke-AtomicTest.</p>
<h3 id="1-list-available-tests-for-a-technique">1. List Available Tests for a Technique</h3>
<p>Before running an attack, it's best to see what specific tests are available for a given MITRE ATT&amp;CK technique. We'll use <code>T1059.001: Command and Scripting Interpreter: PowerShell</code> as an example.</p>
<p>Run the following command to see a brief list of available tests for this technique:</p>
<p><code>Invoke-AtomicTest T1059.001 -ShowDetailsBrief</code></p>
<p>You will see an output listing the different atomic tests available, each with a unique test number, name, and supported platform.</p>
<h3 id="2-check-for-test-prerequisites">2. Check for Test Prerequisites</h3>
<p>Some tests require specific software or configurations to be in place before they can run. This command checks for those dependencies.</p>
<p>Let's check the prerequisites for <code>T1548.002: Abuse Elevation Control Mechanism: Bypass User Account Control</code>:</p>
<p><code>Invoke-AtomicTest T1548.002 -GetPrereqs</code></p>
<p>If any prerequisites are missing, the framework will provide commands to help you install or configure them.</p>
<h3 id="3-run-a-specific-atomic-test">3. Run a Specific Atomic Test</h3>
<p>This is the core command that executes the simulated attack. We will run a test for <code>T1003.001: OS Credential Dumping: LSASS Memory</code>, which simulates an attacker dumping credentials from memory.</p>
<p>Run the following command:</p>
<p><code>Invoke-AtomicTest T1003.001</code></p>
<p>The framework will execute the test defined in the T1003.001 YAML file. You will see output describing the command being run. If you have a security tool (like Sysmon or an EDR) running, this is the action it should detect and alert on.</p>
<h3 id="4-clean-up-after-a-test">4. Clean Up After a Test</h3>
<p>Many tests have corresponding cleanup commands to revert any changes made to the system, such as removing created files or registry keys.
To revert the changes made by the previous test (if any), run the same command with the -Cleanup flag:</p>
<p><code>Invoke-AtomicTest T1003.001 -Cleanup</code></p>
<p>This ensures your VM is returned to its original state.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../vm_setup/" class="btn btn-neutral float-left" title="Virtual Machine"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../rules_created/active_scanning/" class="btn btn-neutral float-right" title="Active Scanning">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../vm_setup/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../rules_created/active_scanning/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
